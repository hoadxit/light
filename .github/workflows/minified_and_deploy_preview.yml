name: Auto minified JS, CSS and Deploy Preview
on:
  pull_request:
    types: [opened, synchronize, closed]
jobs:

  deploy_preview:
    runs-on: ubuntu-latest
    name: 'Deploy Preview'
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2
        
      - name: Setup
        run: 
          sudo gem install shopify-cli #Install shopify-cli
      - name: Set env
        run:
          export CI = 1
      - name: Set env1
        run:
          export SHOPIFY_SHOP = ${{secrets.DP_SHOPIFY_STORE}}
          
      - name: Set env2
        run:
          export SHOPIFY_PASSWORD = ${{secrets.DP_SHOPIFY_APP_PW}
          
      - name: Set env3
        run:
          shopify theme push --unpublished
        
#           export SHOPIFY_SHOP = ${{secrets.DP_SHOPIFY_STORE}}
#           export SHOPIFY_PASSWORD = ${{secrets.DP_SHOPIFY_APP_PW}
#           shopify theme push --unpublished
        

      
        
