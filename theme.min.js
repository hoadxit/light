var vw=vw||{};(function(){"use strict";const a=document.currentScript;class b extends exblock.ToolbarGird{constructor(b){super(b),this.script=a,this.eventListener()}loadBlock(a){var b=this;super.loadBlock(()=>{b.getModelByUrl(),b.loadToolbar(()=>{b.loadContent(()=>{b.loadAction(()=>{a&&a()})})})})}loadToolbar(a){var b=this;if(!b.toolbar){var c=b.getElementId("toolbar");b.toolbar=new dhx.Toolbar(c,{})}if(!b.toolbarItems)return b.getFile(b.script.src.replace("index.js","toolbar.json"),c=>{b.configPopup||b.getFile(b.script.src.replace("index.js","popup.json"),a=>{b.configPopup=JSON.parse(a)}),b.toolbarItems=JSON.parse(c);var d=JSON.parse(JSON.stringify(b.toolbarItems));b.toolbar.data.parse(d),b.toolbarShowHide(),dhx.awaitRedraw().then(function(){a()})});var d=JSON.parse(JSON.stringify(b.toolbarItems));b.toolbar.data.parse(d),b.toolbarShowHide(),document.getElementById("checkbox_all").checked=!1,dhx.awaitRedraw().then(function(){a()})}loadContent(a){var b=this;b.loadGrid(),b.getDataList(null,()=>{var c=b.buildDataset();b.gridView.data.parse(c),dhx.awaitRedraw().then(function(){a()})})}loadGrid(a=null,b){var c=this;if(!c.gridView){var d=c.getElementId("grid-view");c.gridView=new dhx.Grid(d,{columns:[{width:65,id:"checkbox",header:[{text:"Check"}],type:"boolean",editable:!0},{width:65,id:"thumb",header:[{text:"Thumb"}],htmlEnable:!0,align:"center",template:function(a,b){let c=b.thumb?b.thumb:"https://snippet.dhtmlx.com/codebase/data/dataview/01/img/07.jpg";return"<span class='item_thumb'><img src='"+c+"'></span>"}},{minWidth:200,maxWidth:1e3,id:"title",header:[{text:"Title"}],htmlEnable:!0,template:function(a,b){let c="";return c+="       <div class='item_content'>",c+="           <div class='item_title'>"+(b.title||b.name)+"</div>",c+="           <div class='item_time item_cat'>",c+="               <span class='dhx_menu-button__icon mdi mdi-clock-outline'>13/05/2021</span>",c+="               <span class='dhx_menu-button__icon mdi mdi-account-edit-outline'>mr author</span>",c+="           </div>",c+="       </div>",c}},{minWidth:50,maxWidth:100,id:"status",header:[{text:"Status",align:"center"}],align:"center"},{minWidth:200,maxWidth:1e3,id:"action",header:[{text:"Action",align:"center"}],htmlEnable:!0,align:"center",template:function(){let a="";return a+="<div class=\"group_action\">",a+="    <div class=\"page_action\" style=\"display: flex; justify-content: space-between\">",a+="        <button class=\"dhx_button dhx_nav-menu-button page_edit\" type=\"button\">",a+="            <span href=\"#\" action=\"edit\" class=\"dhx_menu-button__icon mdi mdi-square-edit-outline\"></span>",a+="        </button>",a+="        <button class=\"dhx_button dhx_nav-menu-button page_view\" type=\"button\">",a+="            <span href=\"#\" action=\"view\" class=\"dhx_menu-button__icon mdi mdi-eye\"></span>",a+="        </button>",a+="        <button class=\"dhx_button dhx_nav-menu-button page_delete\" type=\"button\">",a+="            <span action=\"delete\" class=\"dhx_menu-button__icon mdi mdi-delete\"></span>",a+="        </button>",a+="    </div>",a+="</div>",a}}],autoWidth:!0,tooltip:!1,selection:"row",autoEmptyRow:!1,rowHeight:65,eventHandlers:{onclick:{page_edit:function(a,b){console.log("edit",b),c.editPage(b.row)},page_view:function(a,b){console.log("view",b)},page_delete:function(a,b){console.log("delete",b),c.delete({items:[b.row]})}}}})}"repaint"==a&&c.gridView&&(c.stateReload=c.gridView.data.serialize(),c.gridView.destructor(),delete c.gridView,c.loadGrid(),c.gridView.data.parse(c.stateReload),delete c.stateReload,c.loadAction()),b&&b()}fakeData(){this;let a={};for(let b=1;100>b;b++)console.log(b),a.title=`Page Nhân Sinh Cảm Ngộ  ${b}`,a.status=0==b%2?"publish":"draft",net.api.saveDataItem("kmvo0eyf-page",a,()=>{})}buildDataset(){var a=this,b=[];return a.dataList.forEach(a=>{b.push({checkbox:!1,id:a.id,loc:a.loc,thumb:a.thumb,title:a.title,status:a.status,author:a.author,category:a.category})}),b}loadAction(a){var b=this;b.toolbarUpdatePagination(),b.toolbar._loadAction||(b.toolbar._loadAction=!0,b.registerEvents(["toolbarDelete","chooseAll","filter","toolbarEdit","toolbarPagination"])),b.gridView._loadAction||(b.gridView._loadAction=!0,b.registerEvents(["gridHover","gridCheckbox"]),b.gridView.events.on("cellClick",a=>{console.log("item",a)})),a&&a()}toolbarShowHide(a=0){var b=this;if(0==a)try{document.getElementById("checkbox_all").checked=!1}catch(a){}switch(a){case 0:b.toolbar.hide(["delete","edit","selected"]),b.toolbar.disable(["delete","edit"]);break;case 1:b.toolbar.show(["delete","edit","selected"]),b.toolbar.enable(["delete","edit"]);break;default:b.toolbar.hide(["edit"]),b.toolbar.disable(["edit"]),b.toolbar.show(["delete","selected"]),b.toolbar.enable(["delete"]);}}editPage(a){this;console.log("edit Item",a)}updateSelected(a=0){var b=this;super.updateSelected(a);let c=1<a?"items":"item";b.toolbar.data.update("selected",{html:`<div> Selected <span class = 'items_selected' id = "items_selected">${a}</span> ${c} </div>`})}eventListener(){var a=this;block.event.clear("OnSearch"),block.event.on("OnSearch",(b,c)=>{c.keyword&&(a.offset.pageCurrent=1,c.title=c.keyword,c.op="title:ct",delete c.keyword),c.loc=a.model.spaceLoc,app.goto(c)})}}block["page-list"]=b})();